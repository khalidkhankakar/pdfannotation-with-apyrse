/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{569:function(xa,ta,h){function ra(){return!1}function na(ca,z,aa){if(!(z in w))return!0;z=w[z];for(var x=0;x<z.length;x++){var fa=ca;var ea=z[x];var ma=aa;if(ea.name in fa){var la="",ja=!1;fa=fa[ea.name];switch(ea.type){case "s":la="String";ja=Object(ka.isString)(fa);break;case "a":la="Array";ja=Object(ka.isArray)(fa);break;case "n":la="Number";ja=Object(ka.isNumber)(fa)&&Object(ka.isFinite)(fa);break;case "o":la="Object",ja=
Object(ka.isObject)(fa)&&!Object(ka.isArray)(fa)}ja||ma.reject('Expected response field "'+ea.name+'" to have type '+la);ea=ja}else ma.reject('Response missing field "'+ea.name+'"'),ea=!1;if(!ea)return!1}return!0}function oa(ca){for(var z=0,aa=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];z<aa.length;z++){var x=aa[z],fa=x;x=x.charAt(0).toUpperCase()+x.slice(1);ca[fa]&&(Object.defineProperty(ca,x,Object.getOwnPropertyDescriptor(ca,
fa)),delete ca[fa])}return ca}h.r(ta);var ia=h(0),ka=h(1);h.n(ka);var ha=h(3);xa=h(56);var y=h(34),ba=h(587),r=h(117),n=h(480),f=h(52),b=h(206),a=function(){function ca(){this.request=this.result=null;this.state=0;var z=this;z.promise=new Promise(function(aa,x){z.resolve=function(){if(0===z.state||4===z.state)z.state=1,z.result=arguments[0],aa.apply(null,arguments)};z.reject=function(){if(0===z.state||4===z.state)z.state=2,x.apply(null,arguments)}})}ca.prototype.ux=function(){return 1===(this.state&
1)};ca.prototype.Wwa=function(){return 2===(this.state&2)};ca.prototype.kl=function(){return!this.Wwa()&&!this.ux()};ca.prototype.pwa=function(){return 4===(this.state&4)};ca.prototype.XV=function(){this.state|=4};return ca}(),e=function(){function ca(){this.bx={};this.Cc=[]}ca.prototype.pop=function(){var z=this.Cc.pop();this.bx[z.key]=void 0;return z};ca.prototype.push=function(z,aa){aa={key:z,data:aa};this.Cc.push(aa);this.bx[z]=aa.data};ca.prototype.contains=function(z){return!!this.bx[z]};ca.prototype.get=
function(z){return this.bx[z]};ca.prototype.set=function(z,aa){var x=this;this.bx[z]=aa;this.Cc.forEach(function(fa,ea){fa.key===z&&(x.Cc[ea]=fa)})};ca.prototype.remove=function(z){var aa=this;this.bx[z]=void 0;this.Cc.forEach(function(x,fa){x.key===z&&aa.Cc.splice(fa,1)})};ca.prototype.length=function(){return this.Cc.length};return ca}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},{name:"rID",
type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};h=function(){function ca(z,aa,x){var fa=this;this.EW=this.B2=!1;this.ej=this.uM=this.Yy=this.Qf=this.tA=this.Ir=this.sA=this.Yp=null;this.yp=new a;this.dt=
new a;this.CH=!1;this.fh=this.Vf=this.Wf=this.Tg=null;this.Fh=[];this.uI=[];this.cache={};this.timeStamp=0;this.Zi=[];this.ul=[];this.LQ=null;this.l2=!1;this.paa=this.id=null;this.zT=this.M5=ra;this.yh=0;this.nS=!1;this.V7=1;this.ql={};this.Qv=0;this.$x=new e;aa.endsWith("/")||(aa+="/");x=x||{};this.B2=x.disableWebsockets||!1;this.EW=x.singleServerMode||!1;null!=x.customQueryParameters&&Object(f.b)("wvsQueryParameters",x.customQueryParameters);aa.endsWith("blackbox/")||(aa+="blackbox/");this.Yp=x.uploadData||
null;this.Yy=x.uriData||null;this.sA=x.cacheKey||null;if(this.Ir=x.officeOptions||null)this.Ir=oa(this.Ir);this.Qf=x.rasterizerOptions||null;this.tA=x.cadOptions||null;this.pg=aa;this.mQ=z;this.Sr(!0);this.gw=(new ba.a(aa,null,this.Oj())).pra(!this.B2,function(ea){fa.Tya(ea)},function(){return null},function(){fa.CH=!1},function(){fa.JCa()})}ca.prototype.sna=function(){var z=this;return new Promise(function(aa,x){var fa=new XMLHttpRequest;fa.open("GET",z.pg+"ck");fa.withCredentials=z.Oj();fa.onreadystatechange=
function(){fa.readyState===XMLHttpRequest.DONE&&(200===fa.status?aa():x())};fa.send()})};ca.prototype.BEa=function(z){this.M5=z||ra;this.zT=ra};ca.prototype.wla=function(){this.J$();return this.gw.yt()};ca.prototype.J$=function(){Object(ia.b)(this,void 0,void 0,function(){return Object(ia.d)(this,function(z){switch(z.label){case 0:return this.dt=new a,this.yp=new a,this.CH=!1,this.id=null,this.l2=!1,[4,this.sna().catch(function(){})];case 1:return z.ba(),[2]}})})};ca.prototype.JCa=function(){this.M5();
this.J$();this.Tg&&(this.Tg.kl()?this.jj(this.Tg.request):this.Tg.ux()&&this.zT(this.Tg.result.url,"pdf")&&(this.Tg=null,this.G$()));this.fh&&this.fh.kl()&&this.jj(this.fh.request);this.Wf&&this.Wf.kl()?this.jj(this.Wf.request):this.Vf&&this.Vf.kl()&&this.w5();var z;for(z=0;z<this.Zi.length;z++)this.Zi[z]&&(this.Zi[z].kl()?this.jj(this.Zi[z].request):this.Zi[z].ux()&&this.zT(this.Zi[z].result.url,"image")&&(this.Zi[z]=null,this.hL(Object(ka.uniqueId)(),z)));for(z=0;z<this.ul.length;z++)this.ul[z]&&
this.ul[z].kl()&&!this.ul[z].pwa()&&this.jj(this.ul[z].request);for(z=0;z<this.Fh.length;z++)this.Fh[z]&&this.Fh[z].kl()&&this.jj(this.Fh[z].request)};ca.prototype.Hva=function(){return this.CH?Promise.resolve():(this.CH=!0,this.timeStamp=Date.now(),this.gw.GJ())};ca.prototype.THa=function(){var z=this,aa,x,fa,ea,ma;return new Promise(function(la,ja){if(z.Yp)aa=new FormData,aa.append("file",z.Yp.fileHandle,z.Yp.fileHandle.name),z.Ir&&aa.append("officeOptions",JSON.stringify(z.Ir)),z.Qf&&aa.append("rasterizerOptions",
JSON.stringify(z.Qf)),z.tA&&aa.append("cadOptions",z.tA.getJsonString()),z.sA&&aa.append("cacheKey",z.sA),x=z.Yp.loadCallback,ea="upload",fa=z.Yp.extension;else if(z.Yy)aa={uri:z.Yy.uri,MMa:z.Yy.shareId},aa=Object.keys(aa).map(function(sa){return sa+"="+(aa[sa]?encodeURIComponent(aa[sa]):"")}).join("&"),ma="application/x-www-form-urlencoded; charset=UTF-8",x=z.Yy.loadCallback,ea="url",fa=z.Yy.extension;else{la();return}var pa=new XMLHttpRequest,qa=Object(y.k)(z.pg,"AuxUpload");qa=Object(b.a)(qa,{type:ea,
ext:fa});pa.open("POST",qa);pa.withCredentials=z.Oj();ma&&pa.setRequestHeader("Content-Type",ma);pa.addEventListener("load",function(){if(pa.readyState===pa.DONE&&200===pa.status){var sa=JSON.parse(pa.response);z.mQ=sa.uri;x(sa);la(sa)}});pa.addEventListener("error",function(){ja(pa.statusText+" "+JSON.stringify(pa))});z.Yp&&null!=z.Yp.onProgress&&(pa.upload.onprogress=function(sa){z.Yp.onProgress(sa)});pa.send(aa)})};ca.prototype.yCa=function(z){this.password=z||null;this.yp.ux()||(this.yp=new a,
this.jj({t:"pages"}));return this.yp.promise};ca.prototype.JD=function(z){this.LQ=z||null;this.yp.ux()||this.jj({t:"pages"});return this.yp.promise};ca.prototype.FA=function(z){z=Object.assign(z,{uri:encodeURIComponent(this.mQ)});this.LQ&&(z.ext=this.LQ);this.ej&&(z.c=this.ej);this.password&&(z.pswd=this.password);this.sA&&(z.cacheKey=this.sA);this.Ir&&(z.officeOptions=this.Ir);this.Qf&&(z.rastOptions=this.Qf);this.tA&&(z.cadOptions=this.tA.mImpl);return z};ca.prototype.oDa=function(){0<this.$x.length()&&
10>=this.Qv&&this.pDa(this.$x.pop().data)};ca.prototype.Ika=function(z){0<this.$x.length()&&this.$x.contains(z)&&this.$x.remove(z)};ca.prototype.jj=function(z){z=this.FA(z);this.gw.send(z)};ca.prototype.kaa=function(z,aa){10<this.Qv?this.$x.push(z,aa):(this.Qv++,z=this.FA(aa),this.gw.send(z))};ca.prototype.pDa=function(z){this.Qv++;z=this.FA(z);this.gw.send(z)};ca.prototype.Bo=function(z){return z};ca.prototype.L5=function(z){this.EW&&z?Object(ha.j)("Server failed health check. Single server mode ignoring check."):
!this.$Ka&&z&&3>=this.yh?(this.nS=!0,this.gw.yt()):3<this.yh&&(this.EW=!0)};ca.prototype.Tya=function(z){var aa=this,x=z.data,fa=z.err,ea=z.t;switch(ea){case "upload":fa?this.UHa.reject(fa):this.UHa.resolve("Success");break;case "pages":fa?this.yp.reject(fa):na(x,ea,this.yp)&&this.yp.resolve(x);break;case "config":if(fa)this.dt.reject(fa);else if(na(x,ea,this.dt)){this.L5(x.unhealthy);x.id&&(this.id=x.id);if(x.auth){var ma=Object(f.a)("wvsQueryParameters");ma.auth=x.auth;Object(f.b)("wvsQueryParameters",
ma)}x.serverVersion&&(this.uM=x.serverVersion,Object(ha.h)("[WebViewer Server] server version: "+this.uM));x.serverID?(this.yh=x.serverID===this.paa&&this.nS?this.yh+1:0,this.paa=x.serverID):this.yh=0;this.nS=!1;this.dt.resolve(x)}break;case "health":fa?this.dt.reject(fa):na(x,ea,this.dt)&&this.L5(x.unhealthy);break;case "pdf":x.url=Object(b.a)(this.pg+"../"+encodeURI(x.url));fa?this.Tg.reject(fa):na(x,ea,this.Tg)&&this.Tg.resolve(x);break;case "ApString2Xod":x.url=Object(b.a)(this.pg+"../data/"+
encodeURI(x.url));fa?this.ql[x.rID].reject(fa):na(x,ea,this.ql[x.rID])&&this.ql[x.rID].resolve(x);break;case "docmod":x.url=Object(b.a)(this.pg+"../"+encodeURI(x.url));fa?this.ql[x.rID].reject(fa):na(x,ea,this.Tg)&&this.ql[x.rID].resolve(x);break;case "xod":if(fa)this.Wf&&this.Wf.kl()&&this.Wf.reject(fa),this.Vf&&this.Vf.kl()&&this.Vf.reject(fa);else if(x.notFound)x.noCreate||this.Wf&&this.Wf.kl()&&this.Wf.resolve(x),this.Vf&&this.Vf.kl()&&this.Vf.resolve(x);else{x.url&&(x.url=Object(b.a)(this.pg+
"../"+encodeURI(x.url)));if(!this.Vf||this.Vf.ux())this.Vf=new a,this.Vf.request={t:"xod",noCreate:!0};this.Wf||(this.Wf=new a,this.Wf.request={t:"xod"});this.Vf.resolve(x);this.Wf.resolve(x)}break;case "cAnnots":ma=this.fh;if(fa)ma.reject(fa);else if(na(x,ea,ma)){ma.XV();var la=[],ja=x.annots;x=function(Ea){var Fa=ja[Ea].s,Aa=ja[Ea].e,La=pa.pg+"../"+encodeURI(ja[Ea].xfdf),Ha="true"===ja[Ea].hasAppearance?Object(b.a)(La+".xodapp"):null,Ma=Object(ka.range)(Fa,Aa+1);la[Ea]={range:Ma,promise:new Promise(function(Ka,
Oa){var Qa=new XMLHttpRequest;Qa.open("GET",Object(b.a)(La));Qa.responseType="text";Qa.withCredentials=aa.Oj();Qa.addEventListener("load",function(){Qa.readyState===Qa.DONE&&200===Qa.status&&Ka({bv:Qa.response,mo:Ha,range:Ma})});Qa.addEventListener("error",function(){Oa(Qa.statusText+" "+JSON.stringify(Qa))});Qa.send()})}};var pa=this;for(fa=0;fa<ja.length;fa++)x(fa);ma.resolve(la)}break;case "annots":if(fa)this.fh.reject(fa);else if(na(x,ea,this.fh)){this.fh.XV();var qa=new XMLHttpRequest;ma=this.pg+
"../"+encodeURI(x.url);var sa=x.hasAppearance?Object(b.a)(ma+".xodapp"):null;qa.open("GET",Object(b.a)(ma));qa.responseType="text";qa.withCredentials=this.Oj();qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&aa.fh.resolve({bv:qa.response,mo:sa})});qa.addEventListener("error",function(){aa.fh.reject(qa.statusText+" "+JSON.stringify(qa))});qa.send()}break;case "image":this.Qv--;var ua=this.Zi[x.p];fa?ua.promise.reject(fa):na(x,ea,ua)&&(ua.result=x,ua.result.url=Object(b.a)(this.pg+
"../"+encodeURI(ua.result.url)),ua.resolve(ua.result));break;case "tiles":this.Qv--;ua=x.rID;ma=this.Fh[ua];this.Fh[ua]=null;this.uI.push(ua);if(fa)ma.reject(fa);else if(na(x,ea,ma)){for(fa=0;fa<x.tiles.length;fa++)x.tiles[fa]=Object(b.a)(this.pg+"../"+encodeURI(x.tiles[fa]));ma.resolve(x)}break;case "text":ua=this.ul[x.p];if(fa)ua.reject(fa);else if(na(x,ea,ua)){ua.XV();var wa=new XMLHttpRequest;x=Object(b.a)(this.pg+"../"+encodeURI(x.url));wa.open("GET",x);wa.withCredentials=this.Oj();wa.addEventListener("load",
function(){wa.readyState===wa.DONE&&200===wa.status&&(ua.result=JSON.parse(wa.response),ua.resolve(ua.result))});wa.addEventListener("error",function(Ea){ua.reject(wa.statusText+" "+JSON.stringify(Ea))});wa.send()}break;case "progress":"loading"===x.t&&this.trigger(r.a.Events.DOCUMENT_LOADING_PROGRESS,[x.bytes,x.total])}this.oDa();!ea&&z.echo&&z&&"apstring2xod"===z.echo.t&&(z=z.echo.reqID)&&(2<=parseInt(this.uM,10)?this.ql[z].reject("Message unhandled by server"):this.ql[z].reject())};ca.prototype.Xra=
function(){return Object(ia.b)(this,void 0,void 0,function(){return Object(ia.d)(this,function(z){switch(z.label){case 0:return[4,this.Hva()];case 1:return z.ba(),[2,this.dt.promise]}})})};ca.prototype.Cra=function(z){for(var aa=this,x=new XMLHttpRequest,fa=Object(b.a)(this.pg+"aul",{id:this.id}),ea=new FormData,ma={},la=0;la<z.body.length;la++){var ja=z.body[la];ma[ja.id]=ja.TO.w+";"+ja.TO.h;ea.append(ja.id,ja.TO.dataString)}z={t:"apstring2xod",reqID:this.V7++,parts:ma};var pa=this.FA(z);ea.append("msg",
JSON.stringify(pa));this.ql[pa.reqID]=new a;x.open("POST",fa);x.withCredentials=this.Oj;fa=new Promise(function(qa,sa){x.onreadystatechange=function(){4===x.readyState&&(200===x.status?qa():sa("An error occurred while sending down appearance strings to the server"))}});x.send(ea);return fa.then(function(){return aa.ql[pa.reqID].promise})};ca.prototype.Ala=function(){var z=this.uM.split("-")[0].split("."),aa=["1","5","9"];if(3!==z.length)throw Error("Invalid WVS version length.");if(3!==aa.length)throw Error("Invalid version length.");
for(var x=0;x<z.length;++x){if(aa.length===x||z[x]>aa[x])return-1;if(z[x]!==aa[x])return 1}return 0};ca.prototype.Xs=function(){return 0>=this.Ala()};ca.prototype.YQ=function(){this.fh||(this.fh=new a,this.Xs()?this.fh.request={t:"cAnnots"}:this.fh.request={t:"annots"},this.jj(this.fh.request));return this.fh.promise};ca.prototype.hL=function(z,aa){this.Zi[aa]||(this.Zi[aa]=new a,this.Zi[aa].request={t:"image",p:aa},this.kaa(z,this.Zi[aa].request));return this.Zi[aa].promise};ca.prototype.zCa=function(z){this.ul[z]||
(this.ul[z]=new a,this.ul[z].request={t:"text",p:z},this.jj(this.ul[z].request));return this.ul[z].promise};ca.prototype.ACa=function(z,aa,x,fa,ea){var ma=this.Fh.length;this.uI.length&&(ma=this.uI.pop());this.Fh[ma]=new a;this.Fh[ma].request={t:"tiles",p:aa,z:x,r:fa,size:ea,rID:ma};this.kaa(z,this.Fh[ma].request);return this.Fh[ma].promise};ca.prototype.G$=function(){this.Tg||(this.Tg=new a,this.Tg.request={t:"pdf"},this.l2?this.Tg.resolve({url:this.mQ}):this.jj(this.Tg.request));return this.Tg.promise};
ca.prototype.B4=function(z){var aa=this,x=new XMLHttpRequest,fa=Object(b.a)(this.pg+"aul",{id:this.id}),ea=new FormData,ma={};z.annots&&(ma.annots="xfdf");z.watermark&&(ma.watermark="png");z.redactions&&(ma.redactions="redact");ma={t:"docmod",reqID:this.V7++,parts:ma};z.print&&(ma.print=!0);var la=this.FA(ma);ea.append("msg",JSON.stringify(la));return Promise.all([z.annots,z.watermark,z.redactions].map(function(ja){return Promise.resolve(ja)})).then(function(ja){var pa=ja[0],qa=ja[1];ja=ja[2];pa&&
ea.append("annots",pa);qa&&ea.append("watermark",qa);ja&&ea.append("redactions",ja);aa.ql[la.reqID]=new a;x.open("POST",fa);x.withCredentials=aa.Oj;pa=new Promise(function(sa,ua){x.onreadystatechange=function(){4===x.readyState&&(200===x.status?sa():ua("An error occurred while sending down annotation data to the server"))}});x.send(ea);return pa.then(function(){return aa.ql[la.reqID].promise})})};ca.prototype.w5=function(){this.Vf||(this.Vf=new a,this.Vf.request={t:"xod",noCreate:!0},this.jj(this.Vf.request));
return this.Vf.promise};ca.prototype.BCa=function(){this.Wf||(this.Wf=new a,this.Wf.request={t:"xod"},this.jj(this.Wf.request));return this.Wf.promise};ca.prototype.Or=function(){return!0};ca.prototype.request=function(){};ca.prototype.T9=function(){};ca.prototype.abort=function(){for(var z=0;z<this.Fh.length;z++)this.Fh[z]&&(this.Fh[z].resolve(null),this.Fh[z]=null,this.uI.push(z));this.close()};ca.prototype.yL=function(z){this.ej=this.ej||{};this.ej.headers=z};ca.prototype.Sr=function(z){this.ej=
this.ej||{};this.ej.internal=this.ej.internal||{};this.ej.internal.withCredentials=z};ca.prototype.Oj=function(){return this.ej&&this.ej.internal?this.ej.internal.withCredentials:null};ca.prototype.getFileData=function(){return Promise.reject()};return ca}();Object(xa.a)(h);Object(n.a)(h);Object(n.b)(h);ta["default"]=h},587:function(xa,ta,h){var ra=h(0),na=h(3),oa=h(34),ia=h(52),ka=h(206),ha=h(96),y=function(){function r(n,f,b,a,e,w){void 0===b&&(b=null);void 0===a&&(a=null);void 0===e&&(e=null);
void 0===w&&(w=null);this.yh=0;this.OT=!1;this.IC=8;this.U$=3E3;this.T0=this.pIa(n);this.url=f?this.T0+"/"+f:this.T0+"/ws";this.ZP=b;this.bD=a;this.CA=e;this.H$=w}r.prototype.pIa=function(n){var f=n.indexOf("://"),b="ws://";0>f?f=0:(5===f&&(b="wss://"),f+=3);var a=n.lastIndexOf("/");0>a&&(a=n.length);return b+n.slice(f,a)};r.prototype.send=function(n){this.ds.readyState===WebSocket.CLOSED||this.OT||this.ds.send(JSON.stringify(n))};r.prototype.GJ=function(){return Object(ra.b)(this,void 0,void 0,function(){var n,
f=this;return Object(ra.d)(this,function(){n=Object(ia.a)("wvsQueryParameters");n.bcid=Object(oa.l)(8);Object(ia.b)("wvsQueryParameters",n);return[2,new Promise(function(b,a){var e=Object(ka.a)(f.url);f.ds=new WebSocket(e);f.ds.onopen=function(){f.OT=!1;f.yh=0;f.bD&&f.bD();b()};f.ds.onerror=function(){f.OT=!0};f.ds.onclose=function(w){w=w.code;f.CA&&f.CA();1E3!==w&&3E3!==w&&f.dva(b,a)};f.ds.onmessage=function(w){w&&w.data&&(w=JSON.parse(w.data),w.hb?f.send({hb:!0}):w.end?close():f.ZP(w))}})]})})};
r.prototype.dva=function(n,f){Object(ra.b)(this,void 0,void 0,function(){var b=this;return Object(ra.d)(this,function(){this.yh<this.IC?setTimeout(function(){b.yh++;Object(na.j)("Reconnecting to WebViewer Server, attempt "+b.yh+" of "+b.IC+" ...");b.GJ().then(n).catch(f)},this.U$):f(ha.a);return[2]})})};r.prototype.yt=function(){var n;void 0===n&&(n=!1);this.yh=0;n?this.ds.close(3E3):this.ds.close();return Promise.resolve()};return r}(),ba=function(){function r(n,f,b,a,e,w,ca){void 0===a&&(a=null);
void 0===e&&(e=null);void 0===w&&(w=null);void 0===ca&&(ca=null);this.yh=this.gL=this.id=0;this.aC=!1;this.request=null;this.IC=8;this.U$=3E3;n=this.GAa(n);this.url=f?n+"/"+f+"pf":n+"/pf";this.nM=b;this.ZP=a;this.bD=e;this.CA=w;this.H$=ca}r.prototype.GAa=function(n){var f=n.lastIndexOf("/");0>f&&(f=n.length);return n.slice(0,f)};r.prototype.Uma=function(n){n=n.split("\n");for(n[n.length-1]&&n.pop();0<n.length&&3>n[n.length-1].length;)"]"===n.pop()&&(this.id=0);0<n.length&&3>n[0].length&&n.shift();
for(var f=0;f<n.length;++f)n[f].endsWith(",")&&(n[f]=n[f].substr(0,n[f].length-1));return n};r.prototype.T$=function(){return Object(ra.b)(this,void 0,void 0,function(){var n=this;return Object(ra.d)(this,function(f){switch(f.label){case 0:return this.yh++<this.IC?[4,new Promise(function(b){return setTimeout(function(){n.H$();n.GJ();b()},3E3)})]:[3,2];case 1:f.ba(),f.label=2;case 2:return[2]}})})};r.prototype.IAa=function(n){Object(ra.b)(this,void 0,void 0,function(){var f,b;return Object(ra.d)(this,
function(a){switch(a.label){case 0:f=null,b=0,a.label=1;case 1:if(!(b<n.length))return[3,6];f=JSON.parse(n[b]);if(!f)return[3,5];if(!f.end)return[3,2];close();return[3,5];case 2:if(!f.id||Number(f.id)===this.id)return[3,4];Object(na.j)("Reconnecting, new server detected");this.yt();return[4,this.T$()];case 3:return a.ba(),[3,5];case 4:f.hb&&Number(f.id)===this.id?this.send({hb:!0}):this.aC||this.ZP(f),a.label=5;case 5:return++b,[3,1];case 6:return[2]}})})};r.prototype.Oya=function(n){Object(ra.b)(this,
void 0,void 0,function(){var f,b,a;return Object(ra.d)(this,function(e){switch(e.label){case 0:if(!(3<=n.readyState))return[3,2];try{f=n.responseText.length}catch(w){return Object(na.h)("caught exception"),[2]}if(0<f)try{b=this.Uma(n.responseText),0===this.id&&0<b.length&&(a=JSON.parse(b.shift()),this.id=a.id,this.yh=0),this.IAa(b)}catch(w){}return this.aC?[3,2]:[4,this.s3()];case 1:e.ba(),e.label=2;case 2:return[2]}})})};r.prototype.s3=function(){return Object(ra.b)(this,void 0,void 0,function(){var n=
this;return Object(ra.d)(this,function(){return[2,new Promise(function(f,b){function a(){return Object(ra.b)(n,void 0,void 0,function(){return Object(ra.d)(this,function(w){switch(w.label){case 0:b(),this.yt(),w.label=1;case 1:return this.aC&&this.yh<this.IC?[4,this.T$()]:[3,3];case 2:return w.ba(),[3,1];case 3:return[2]}})})}n.request=new XMLHttpRequest;n.request.withCredentials=n.nM;var e=Object(ka.a)(n.url,0!==n.id?{id:String(n.id),uc:String(n.gL)}:{uc:String(n.gL)});n.gL++;n.request.open("GET",
e,!0);n.request.setRequestHeader("Cache-Control","no-cache");n.request.setRequestHeader("X-Requested-With","XMLHttpRequest");n.request.onreadystatechange=function(){n.Oya(n.request)};n.request.addEventListener("error",a);n.request.addEventListener("timeout",a);n.request.addEventListener("load",function(){n.bD&&n.bD();f()});n.request.send()})]})})};r.prototype.GJ=function(){var n=Object(ia.a)("wvsQueryParameters");n.bcid=Object(oa.l)(8);Object(ia.b)("wvsQueryParameters",n);this.gL=this.id=0;this.aC=
!1;return this.s3()};r.prototype.send=function(n){var f=this,b=new XMLHttpRequest;b.withCredentials=this.nM;var a=Object(ka.a)(this.url,{id:String(this.id)}),e=new FormData;e.append("data",JSON.stringify(n));b.addEventListener("error",function(){f.yt()});b.open("POST",a);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.send(e)};r.prototype.yt=function(){this.id=0;this.aC=!0;this.CA&&this.CA();this.request.abort();return Promise.resolve()};return r}();xa=function(){function r(n,f,b){this.G1=
n;this.target=f;this.nM=b}r.prototype.pra=function(n,f,b,a,e){void 0===n&&(n=!0);void 0===f&&(f=null);void 0===b&&(b=null);void 0===a&&(a=null);void 0===e&&(e=null);return n?new y(this.G1,this.target,f,b,a,e):new ba(this.G1,this.target,this.nM,f,b,a,e)};return r}();ta.a=xa}}]);}).call(this || window)
